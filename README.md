# 华东交通大学校园网自动登录脚本(ECJTU Campus Network Auto Login Script)

## 简介

本项目包含一个 Python 脚本，用于自动登录华东交通大学（ECJTU）的校园网 Eportal 认证系统。当你连接到校园网（有线或 Wi-Fi）但尚未认证时，运行此脚本可以自动完成登录过程，省去手动打开浏览器输入账号密码的步骤。

脚本基于对特定登录过程的网络日志分析编写，模拟了浏览器登录时的 POST 请求。

**注意:** 此脚本目前仅自动检测 IP 地址，MAC 地址使用固定的 `00-00-00-00-00-00`。如果校园网系统要求或校验真实的 MAC 地址，此脚本可能需要修改。但实测本校的MAC校验较弱，目前可以使用。

## 功能特性

* 自动检测当前是否需要登录校园网。
* 自动获取当前的本地 IP 地址用于登录请求。
* 使用用户配置的账号、密码和运营商信息发送登录 POST 请求。
* 验证登录是否成功。

## 环境要求

* 操作系统：Windows 11 (理论上也兼容 Windows 10)
* Python：需要安装 Python 3.x 环境。
    * 下载地址: [https://www.python.org/downloads/windows/](https://www.python.org/downloads/windows/)
    * **重要**: 安装时请务必勾选 "Add Python to PATH" 选项。
* Python 库：需要安装 `requests` 库。

## 安装与配置

1.  **下载脚本**:
    * 通过 Git 克隆本仓库：
        ```bash
        git clone https://github.com/bestxiangest/ECJTU-Campus-Network-Auto-Login-Script
        cd ECJTU-Campus-Network-Auto-Login-Script
        ```
    * 或者直接下载仓库中的 `campus_login.py` 文件。

2.  **安装依赖库**:
    * 打开命令提示符 (CMD) 或 PowerShell。
    * 运行以下命令安装 `requests` 库：
        ```bash
        pip install requests
        ```

3.  **配置用户信息**:
    * 使用文本编辑器（如记事本、VS Code、Notepad++ 等）打开 `campus_login.py` 文件。
    * 找到以下几行代码：
        ```python
        # --- 用户凭据 ---
        USERNAME = "2023061004000xxx"
        PASSWORD = "xxxxx"
        OPERATOR_SUFFIX = "@unicom" # 中国联通对应的后缀
        ```
    * **将 `USERNAME` 的值修改为你自己的学号或账号。**
    * **将 `PASSWORD` 的值修改为你自己的密码。**
    * **确认 `OPERATOR_SUFFIX`**:
        * 如果你是中国联通用户，保持 `@unicom` 不变。
        * 如果你是中国电信用户，修改为 `@telecom`。
        * 如果你是中国移动用户，修改为 `@cmcc`。
        * 如果你的账号登录时不需要选择运营商或没有后缀，将其设置为空字符串 `""`。
    * **保存文件。**

## 使用方法 (手动运行)

1.  确保你已连接到华东交通大学的校园网（有线或无线）。
2.  打开命令提示符 (CMD) 或 PowerShell。
3.  使用 `cd` 命令切换到 `campus_login.py` 文件所在的目录。例如，如果你把它保存在桌面上：
    ```bash
    cd %USERPROFILE%\Desktop
    ```
4.  运行脚本：
    ```bash
    python campus_login.py
    ```
5.  脚本会自动检测网络状态。如果需要登录，它会尝试自动登录并输出相应的信息。如果已经联网，它会提示无需登录。

## 设置开机/登录时自动运行 (Windows 11)

你可以使用 Windows 的任务计划程序让脚本在每次登录 Windows 时自动运行。

1.  **找到 Python 解释器路径**:
    * 打开命令提示符 (CMD)。
    * 输入 `where python` 并回车。
    * 复制显示的第一个路径（通常类似 `C:\Users\YourUsername\AppData\Local\Programs\Python\Python3X\python.exe` 或 `C:\Python3X\python.exe`）。**记下这个完整路径。**

2.  **获取脚本的完整路径**:
    * 找到你保存 `campus_login.py` 文件的位置。
    * 按住 `Shift` 键，然后右键点击 `campus_login.py` 文件，选择“复制文件地址”或“复制为路径”。**记下这个完整路径。**

3.  **打开任务计划程序**:
    * 在 Windows 搜索栏中搜索“任务计划程序”并打开它。

4.  **创建基本任务**:
    * 在右侧的“操作”面板中，点击“创建基本任务...”。

5.  **填写任务信息**:
    * **名称**: 输入一个描述性的名称，例如 `自动登录校园网`。
    * **描述**: (可选) 输入 `开机/登录时自动运行校园网登录脚本`。
    * 点击“下一步”。

6.  **设置触发器**:
    * 选择“当前用户登录时”。
    * 点击“下一步”。

7.  **设置操作**:
    * 选择“启动程序”。
    * 点击“下一步”。

8.  **配置启动程序**:
    * **程序或脚本**: 粘贴你在第 1 步中找到的 **Python 解释器 (`python.exe`) 的完整路径**。
    * **添加参数(可选)**: 粘贴你在第 2 步中复制的 **`campus_login.py` 脚本的完整路径** (路径两边最好加上英文双引号，特别是路径包含空格时)。
    * **起始于(可选)**: 粘贴 `campus_login.py` **所在的文件夹路径**（不包含文件名本身）。例如，如果脚本在 `C:\Scripts\`，就填 `C:\Scripts\`。
    * 点击“下一步”。

9.  **完成**:
    * 查看摘要信息，确认无误后，勾选“当单击‘完成’时，打开此任务属性的对话框”。
    * 点击“完成”。

10. **(可选) 调整高级属性**:
    * 在打开的属性对话框中：
        * **常规** 选项卡：可以考虑勾选“使用最高权限运行”（有时网络操作需要更高权限），但通常不必须。确认下方的“配置给”选择了 Windows 11。
        * **条件** 选项卡：取消勾选“只有在计算机使用交流电源时才启动此任务”（如果你希望在用电池时也能自动登录）。
        * **设置** 选项卡：可以按需调整，例如“如果任务失败，按以下频率重新启动”等。
    * 点击“确定”。

现在，每次你登录 Windows 账户后，系统应该会自动运行这个 Python 脚本来尝试登录校园网。

## 重要提示

* **密码安全**: 脚本中以明文形式存储了你的密码。请确保 `campus_login.py` 文件的安全，不要分享给他人。考虑使用更安全的方式管理密码（如环境变量、配置文件权限控制等）是更佳实践，但这会增加配置的复杂性。
* **学校政策**: 使用自动化脚本登录可能违反学校的网络使用规定。请自行确认并承担相应风险。
* **网络变更**: 如果学校的 Eportal 登录系统更新（如 URL、参数、认证方式改变），此脚本可能失效，需要重新分析并修改代码。
* **错误处理**: 脚本包含基本的网络错误处理，但不能覆盖所有情况。如果登录失败，请查看脚本的输出信息。

## 故障排除

* **登录失败**:
    * 检查 `campus_login.py` 文件中的 `USERNAME`, `PASSWORD`, `OPERATOR_SUFFIX` 是否完全正确。
    * 确认你的 IP 地址是否在脚本尝试登录时与登录请求中的 IP 匹配（脚本会自动检测）。
    * 校园网登录系统可能已变更，脚本需要更新。
    * 尝试手动登录一次，看是否能成功，或者登录页面是否有变化。
* **自动启动不工作**:
    * 检查任务计划程序中的 Python 解释器路径、脚本路径、起始目录是否都正确无误。
    * 尝试在任务属性中勾选“使用最高权限运行”。
    * 查看任务计划程序中的“上次运行结果”，看是否有错误代码。

## 贡献

欢迎提出 Issue 或 Pull Request 来改进此脚本。

## 许可证

MIT License。